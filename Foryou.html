<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Em Destaque</title>
    <link rel="icon" href="images/ArtBeat_Branco.png">
    <link rel="stylesheet" href="css/feed.css">
    <link rel="stylesheet" href="css/foryou.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">

</head>
<body>
    <!-- Menu -->
    <div class="topo">
        <header>
            <nav>
                <div class="imagemLogo">
                    <img src="images/ArtBeat_Branco.png" class="logo" alt="logo art beat">
                </div>
            
                <ul class="menu">
                    <li class="dropdown"><a href="Feed.html">Feed</a></li>
                    <li class="dropdown"><a href="Foryou.html" class="enfase">Populares</a></li>
                    <li class="dropdown"><a href="ArtistasLogado.html">Aleat√≥rios</a></li>
                    <li class="dropdown"><a href="DesafiosLogado.html">Desafios</a></li>
                    <li class="dropdown" onclick="window.location.href='PerfilUsu√°rio.html'"><a href="#"><i class="fa-solid fa-circle-user fa-xl" style="color: #ffffff;"></i></a></li>
                </ul>
            </nav>
        </header>
    </div>

    <!-- Conte√∫do Principal -->
    <div class="container">
        <h1 class="page-title">Artistas em Destaque</h1>
        <p class="page-subtitle">Descubra os artistas mais populares e bem avaliados da plataforma</p>
        
        <!-- Filtros -->
        <div class="filters">
            <button class="filter-btn active" data-filter="all">Todos</button>
            <button class="filter-btn" data-filter="musica">M√∫sica</button>
            <button class="filter-btn" data-filter="letra">Letra</button>
            <button class="filter-btn" data-filter="arte">Arte</button>
            <div class="sort-select">
                <label for="sort-by">Ordenar por:</label>
                <select id="sort-by">
                    <option value="rating">Maior Avalia√ß√£o</option>
                    <option value="followers">Mais Seguidos</option>
                    <option value="newest">Mais Recentes</option>
                </select>
            </div>
        </div>
        
        <!-- Lista de Artistas -->
        <div class="artists-grid" id="artists-grid">
            <!-- Os artistas ser√£o carregados via JavaScript -->
        </div>
    </div>

    <script>
        // Dados de exemplo dos artistas
        const artistsData = [
            {
                id: 1,
                name: "Ana Silva",
                category: "M√∫sica",
                followers: 12500,
                works: 42,
                rating: 4.9,
                avatar: "üé§"
            },
            {
                id: 2,
                name: "Carlos Mendes",
                category: "Letra",
                followers: 8900,
                works: 28,
                rating: 4.8,
                avatar: "‚úçÔ∏è"
            },
            {
                id: 3,
                name: "Beatriz Santos",
                category: "Arte",
                followers: 15600,
                works: 35,
                rating: 4.7,
                avatar: "üé®"
            },
            {
                id: 4,
                name: "Jo√£o Costa",
                category: "M√∫sica",
                followers: 7200,
                works: 19,
                rating: 4.6,
                avatar: "üé∏"
            },
            {
                id: 5,
                name: "Marina Oliveira",
                category: "Letra",
                followers: 10300,
                works: 31,
                rating: 4.9,
                avatar: "üìù"
            },
            {
                id: 6,
                name: "Ricardo Alves",
                category: "Arte",
                followers: 6800,
                works: 24,
                rating: 4.5,
                avatar: "üñåÔ∏è"
            },
            {
                id: 7,
                name: "Fernanda Lima",
                category: "M√∫sica",
                followers: 14200,
                works: 38,
                rating: 4.8,
                avatar: "üéπ"
            },
            {
                id: 8,
                name: "Pedro Martins",
                category: "Letra",
                followers: 9500,
                works: 27,
                rating: 4.7,
                avatar: "üìñ"
            }
        ];

        // Fun√ß√£o para normalizar categorias (remove acentos e converte para min√∫sculas)
        function normalizeCategory(category) {
            return category.normalize('NFD').replace(/[\u0300-\u036f]/g, '').toLowerCase();
        }

        // Fun√ß√£o para renderizar os artistas
        function renderArtists(artists) {
            const grid = document.getElementById('artists-grid');
            grid.innerHTML = '';
            
            artists.forEach(artist => {
                const stars = '‚òÖ'.repeat(Math.floor(artist.rating)) + '‚òÜ'.repeat(5 - Math.floor(artist.rating));
                
                const card = document.createElement('div');
                card.className = 'artist-card';
                card.dataset.category = normalizeCategory(artist.category);
                
                card.innerHTML = `
                    <div class="artist-header">
                        <div class="artist-avatar">${artist.avatar}</div>
                    </div>
                    <div class="artist-info">
                        <h3 class="artist-name">${artist.name}</h3>
                        <span class="artist-category">${artist.category}</span>
                        
                        <div class="artist-stats">
                            <div class="stat">
                                <div class="stat-value">${artist.followers.toLocaleString()}</div>
                                <div class="stat-label">Seguidores</div>
                            </div>
                            <div class="stat">
                                <div class="stat-value">${artist.works}</div>
                                <div class="stat-label">Obras</div>
                            </div>
                        </div>
                        
                        <div class="artist-rating">
                            <div class="rating-stars">${stars}</div>
                            <span class="rating-value">${artist.rating}</span>
                        </div>
                        
                        <div class="artist-actions">
                            <button class="btn-follow js-seguir-btn">Seguir</button>
                            <button class="btn-monetize">
                                <i class="fa-solid fa-sack-dollar"></i>
                            </button>
                        </div>
                    </div>
                `;
                
                grid.appendChild(card);
            });
            
            // Adicionar event listeners aos bot√µes de seguir
            document.querySelectorAll('.js-seguir-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    if (this.textContent === 'Seguir') {
                        this.textContent = 'Seguindo';
                        this.classList.add('seguindo');
                    } else {
                        this.textContent = 'Seguir';
                        this.classList.remove('seguindo');
                    }
                });
            });
        }

        // Fun√ß√£o para filtrar artistas (CORRIGIDA)
        function filterArtists(category) {
            if (category === 'all') {
                return artistsData;
            }
            
            return artistsData.filter(artist => {
                const artistCategory = normalizeCategory(artist.category);
                return artistCategory === category;
            });
        }

        // Fun√ß√£o para ordenar artistas
        function sortArtists(artists, criteria) {
            const sorted = [...artists];
            
            switch(criteria) {
                case 'rating':
                    return sorted.sort((a, b) => b.rating - a.rating);
                case 'followers':
                    return sorted.sort((a, b) => b.followers - a.followers);
                case 'newest':
                    return sorted.sort((a, b) => b.id - a.id);
                default:
                    return sorted;
            }
        }

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            // Renderizar todos os artistas inicialmente
            renderArtists(sortArtists(artistsData, 'rating'));
            
            // Filtros por categoria
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    // Remover classe active de todos os bot√µes
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    
                    // Adicionar classe active ao bot√£o clicado
                    this.classList.add('active');
                    
                    // Filtrar artistas
                    const category = this.dataset.filter;
                    const filteredArtists = filterArtists(category);
                    
                    // Ordenar e renderizar
                    const sortBy = document.getElementById('sort-by').value;
                    renderArtists(sortArtists(filteredArtists, sortBy));
                });
            });
            
            // Ordena√ß√£o
            document.getElementById('sort-by').addEventListener('change', function() {
                const activeFilter = document.querySelector('.filter-btn.active').dataset.filter;
                const filteredArtists = filterArtists(activeFilter);
                renderArtists(sortArtists(filteredArtists, this.value));
            });
            
            // Adicionar event listeners para os bot√µes de monetiza√ß√£o
            document.querySelectorAll('.monetizabtn').forEach(btn => {
                btn.addEventListener('click', function() {
                    // Aqui voc√™ pode adicionar a l√≥gica para abrir o popup de monetiza√ß√£o
                    console.log('Abrir popup de monetiza√ß√£o');
                });
            });
        });
    </script>

    <!-- Pop-up de Monetiza√ß√£o -->
    <div class="monetization-overlay" id="monetization-overlay">
        <div class="monetization-popup">
            <div class="monetization-header">
                <h3>Apoiar username0255</h3>
                <button class="close-monetization" id="close-monetization">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="monetization-content">
                <div class="user-info">
                    <i class="fa-solid fa-circle-user fa-2x"></i>
                    <span>username0255</span>
                </div>
                
                <p class="monetization-description">Selecione um valor para apoiar este artista ou digite um valor personalizado:</p>
                
                <div class="amount-options">
                    <button class="amount-option" data-value="5">R$ 5</button>
                    <button class="amount-option" data-value="10">R$ 10</button>
                    <button class="amount-option" data-value="20">R$ 20</button>
                    <button class="amount-option" data-value="50">R$ 50</button>
                </div>
                
                <div class="custom-amount">
                    <label for="custom-amount-input">Ou informe outro valor:</label>
                    <div class="input-group">
                        <span class="currency-symbol">R$</span>
                        <input type="number" id="custom-amount-input" min="5" step="1" placeholder="5,00">
                    </div>
                </div>
                
                <div class="payment-method">
                    <h4>M√©todo de pagamento</h4>
                    <div class="payment-options">
                        <label class="payment-option">
                            <input type="radio" name="payment-method" value="pix" checked>
                            <span class="payment-label">PIX</span>
                        </label>
                        <label class="payment-option">
                            <input type="radio" name="payment-method" value="credit-card">
                            <span class="payment-label">Cart√£o de Cr√©dito</span>
                        </label>
                    </div>
                </div>
                
                <button class="btn-donate" id="btn-donate">Doar Agora</button>
            </div>
        </div>
    </div>

    <!--monetizar-->
    <script>
    // Controle do pop-up de monetiza√ß√£o
    document.addEventListener('DOMContentLoaded', function() {
        const monetizaButtons = document.querySelectorAll('.btn-monetize');
        const monetizationOverlay = document.getElementById('monetization-overlay');
        const closeMonetization = document.getElementById('close-monetization');
        const amountOptions = document.querySelectorAll('.amount-option');
        const customAmountInput = document.getElementById('custom-amount-input');
        const btnDonate = document.getElementById('btn-donate');

        let selectedAmount = 0;

        // Abrir pop-up de monetiza√ß√£o (C√ìDIGO CORRIGIDO)
        monetizaButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                monetizationOverlay.classList.add('active');
                document.body.style.overflow = 'hidden';
                
                // Encontrar o cart√£o do artista e obter o nome
                const artistCard = btn.closest('.artist-card');
                if (artistCard) {
                    const artistNameElement = artistCard.querySelector('.artist-name');
                    if (artistNameElement) {
                        const artistName = artistNameElement.textContent;
                        
                        // Atualizar o t√≠tulo do pop-up
                        const title = monetizationOverlay.querySelector('.monetization-header h3');
                        if (title) {
                            title.textContent = `Apoiar ${artistName}`;
                        }
                        
                        // Atualizar o nome do usu√°rio no conte√∫do
                        const userSpan = monetizationOverlay.querySelector('.user-info span');
                        if (userSpan) {
                            userSpan.textContent = artistName;
                        }
                    }
                }
            });
        });

        // Fechar pop-up de monetiza√ß√£o
        closeMonetization.addEventListener('click', () => {
            monetizationOverlay.classList.remove('active');
            document.body.style.overflow = '';
            resetMonetizationForm();
        });

        // Fechar ao clicar fora do pop-up
        monetizationOverlay.addEventListener('click', (e) => {
            if (e.target === monetizationOverlay) {
                monetizationOverlay.classList.remove('active');
                document.body.style.overflow = '';
                resetMonetizationForm();
            }
        });

        // Fechar com tecla ESC
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && monetizationOverlay.classList.contains('active')) {
                monetizationOverlay.classList.remove('active');
                document.body.style.overflow = '';
                resetMonetizationForm();
            }
        });

        // Selecionar valor pr√©-definido
        amountOptions.forEach(option => {
            option.addEventListener('click', () => {
                // Remover sele√ß√£o anterior
                amountOptions.forEach(opt => opt.classList.remove('selected'));
                
                // Selecionar nova op√ß√£o
                option.classList.add('selected');
                
                // Definir valor selecionado
                selectedAmount = parseInt(option.dataset.value);
                customAmountInput.value = '';
                
                // Habilitar bot√£o de doar
                btnDonate.disabled = false;
            });
        });

        // Entrada de valor personalizado
        customAmountInput.addEventListener('input', () => {
            // Remover sele√ß√£o dos bot√µes de valor pr√©-definido
            amountOptions.forEach(opt => opt.classList.remove('selected'));
            
            // Obter valor do input
            const value = parseFloat(customAmountInput.value);
            
            if (value >= 5) {
                selectedAmount = value;
                btnDonate.disabled = false;
            } else {
                selectedAmount = 0;
                btnDonate.disabled = true;
            }
        });

        // Processar doa√ß√£o
        btnDonate.addEventListener('click', () => {
            if (selectedAmount >= 5) {
                // Aqui voc√™ implementaria a integra√ß√£o com o gateway de pagamento
                alert(`Obrigado pela doa√ß√£o de R$ ${selectedAmount.toFixed(2)}!`);
                
                // Fechar o pop-up ap√≥s a doa√ß√£o
                monetizationOverlay.classList.remove('active');
                document.body.style.overflow = '';
                resetMonetizationForm();
            }
        });

        // Fun√ß√£o para resetar o formul√°rio
        function resetMonetizationForm() {
            amountOptions.forEach(opt => opt.classList.remove('selected'));
            customAmountInput.value = '';
            selectedAmount = 0;
            btnDonate.disabled = true;
            
            // Resetar m√©todo de pagamento para PIX
            const pixOption = document.querySelector('input[value="pix"]');
            if (pixOption) {
                pixOption.checked = true;
            }
        }

        // Inicializar bot√£o como desabilitado
        btnDonate.disabled = true;
    });
    </script>

</body>
</html>