<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title> Feed </title>
    
    <link rel="icon" href="images/ArtBeat_Branco.png">
    <link rel="stylesheet" href="css/feed.css">
    <!--link para conseguir usar os icons do site font awesome-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Bootstrap CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <!-- ArtBeat Bootstrap Customizations -->
    <link href="css/bootstrap-artbeat.css" rel="stylesheet">
</head>
<body>
    <!--MENU ANTIGO
    <div class="topo">
        <header>
            <nav>
                <div class="imagemLogo">
                    <img src="images/ArtBeat_Branco.png" class="logo" alt="logo art beat">
                </div>
            
                <ul class="menu">
                    <li class="dropdown">
                         <a href="Musicas.html" class="enfase">M√∫sica</a>
                        <button class="dropbtn">
                            <i class="fa-solid fa-chevron-down fa-2xs" style="color: #ffffff;"></i>
                        </button>
                        <ul class="submenu">
                            <li><a href="#">Bossa nova</a></li>
                            <li><a href="#">Eletronica</a></li>
                            <li><a href="#">Funk</a></li>
                            <li><a href="#">K-pop</a></li>
                            <li><a href="#">MPB</a></li>
                            <li><a href="#">Pagode</a></li>
                            <li><a href="#">Pop</a></li>
                            <li><a href="#">R&B</a></li>
                            <li><a href="#">Reggae</a></li>
                            <li><a href="#">Rock</a></li>
                            <li><a href="#">Sertanejo</a></li>
                            <li><a href="#">Trap</a></li>
                        </ul>
                        
                    </li>
                    <li class="dropdown">
                        <a href="Letras.html">Letra</a>
                        <button class="dropbtn">
                            <i class="fa-solid fa-chevron-down fa-2xs" style="color: #ffffff;"></i>
                        </button>
                        <ul class="submenu">
                            <li><a href="#">Eletronica</a></li>
                            <li><a href="#">Funk</a></li>
                            <li><a href="#">K-pop</a></li>
                            <li><a href="#">MPB</a></li>
                            <li><a href="#">Pagode</a></li>
                            <li><a href="#">Pop</a></li>
                            <li><a href="#">R&B</a></li>
                            <li><a href="#">Reggae</a></li>
                            <li><a href="#">Rock</a></li>
                            <li><a href="#">Sertanejo</a></li>
                            <li><a href="#">Trap</a></li>
                        </ul>
                    </li>
                    <li class="dropdown"> 
                        <a href="Artes.html">Arte</a>
                        <button class="dropbtn">
                            <i class="fa-solid fa-chevron-down fa-2xs" style="color: #ffffff;"></i>
                        </button>
                        <ul class="submenu">
                                <li><a href="#">Fotografia</a></li>
                                <li><a href="#">Ilustra√ß√£o digital</a></li>
                                <li><a href="#">Ilustra√ß√£o manual</a></li>
                                <li><a href="#">Minimalismo</a></li>
                                <li><a href="#">Arte gr√°fica</a></li>
                                <li><a href="#">Surrealismo</a></li>
                                <li><a href="#">Pop-art</a></li>
                        </ul>
                    </li>
                    <li class="dropdown" onclick="window.location.href='PerfilUsu√°rio.html'"><a href="#"><i class="fa-solid fa-circle-user fa-xl" style="color: #ffffff;"></i></a></li>
                </ul>
            </nav>
        </header>
    </div>
    END MENU ANTIGO-->

    <!--menu atual-->
    <div class="topo">
        <header>
            <nav>
                <div class="imagemLogo">
                    <img src="images/ArtBeat_Branco.png" class="logo" alt="logo art beat">
                </div>
            
                <ul class="menu">
                    <li class="dropdown"><a href="Feed.html" class="enfase">Feed</a></li>
                    <li class="dropdown"><a href="ArtistasLogado.html">Artistas</a></li>
                    <li class="dropdown"><a href="DesafiosLogado.html">Desafios</a></li>
                    <li class="dropdown" onclick="window.location.href='PerfilUsu√°rio.html'"><a href="#"><i class="fa-solid fa-circle-user fa-xl" style="color: #ffffff;"></i></a></li>
                </ul>
            </nav>
        </header>
    </div>
    <!--end menu atual-->

    <script>
        document.querySelectorAll(".dropbtn").forEach(btn => {
            btn.addEventListener("click", () => {
                let submenu = btn.nextElementSibling; // pega o submenu
                let icon = btn.querySelector("i");    // pega o √≠cone dentro do bot√£o

                // Pega o display atual do submenu
                let displayStyle = window.getComputedStyle(submenu).display;

                if (displayStyle === "block") {
                    submenu.style.display = "none";
                    icon.classList.remove("fa-chevron-up");
                    icon.classList.add("fa-chevron-down");
                } else {
                    submenu.style.display = "block";
                    icon.classList.remove("fa-chevron-down");
                    icon.classList.add("fa-chevron-up");
                }
            });
        });
    </script>
    <!--end menu-->

    <!-- Bootstrap Post Card Examples -->
    <div class="container mt-4">
        
        <!-- Post Card 1 - Music -->
        <div class="card mb-4">
            <div class="card-body">
                <div class="d-flex align-items-center justify-content-between mb-3">
                    <div class="d-flex align-items-center">
                        <div class="rounded-circle bg-secondary d-flex align-items-center justify-content-center me-3" 
                             style="width: 50px; height: 50px;">
                            <i class="fas fa-user text-white"></i>
                        </div>
                        <div class="flex-grow-1">
                            <div class="d-flex align-items-center justify-content-between">
                                <div>
                                    <h6 class="mb-0">@musiclover2024</h6>
                                    <small class="text-muted">H√° 2 horas</small>
                                </div>
                                <button class="btn btn-sm btn-outline-primary monetizabtn ms-3" data-sound="navigation">
                                    <i class="fas fa-dollar-sign me-1"></i>Apoiar
                                </button>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-primary btn-sm follow-btn" data-sound="follow">Seguir</button>
                </div>
                
                <p class="mb-3">Acabei de lan√ßar minha nova m√∫sica! O que voc√™s acham dessa batida? üéµ</p>
                
                <div class="mb-3">
                    <audio controls class="w-100">
                        <source src="audios/audioPop.mpeg" type="audio/mpeg">
                        Seu navegador n√£o suporta √°udio.
                    </audio>
                </div>
                
                <!-- Star Rating -->
                <div class="star-rating" data-post="1">
                    <button class="btn btn-sm" data-rating="1" data-sound="star">
                        <i class="far fa-star"></i>
                    </button>
                    <button class="btn btn-sm" data-rating="2" data-sound="star">
                        <i class="far fa-star"></i>
                    </button>
                    <button class="btn btn-sm" data-rating="3" data-sound="star">
                        <i class="far fa-star"></i>
                    </button>
                    <button class="btn btn-sm" data-rating="4" data-sound="star">
                        <i class="far fa-star"></i>
                    </button>
                    <button class="btn btn-sm" data-rating="5" data-sound="star">
                        <i class="far fa-star"></i>
                    </button>
                    <button class="btn btn-sm ms-2" data-sound="comment">
                        <i class="far fa-comment-dots"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Post Card 2 - Visual Art -->
        <div class="card mb-4">
            <div class="card-body">
                <div class="d-flex align-items-center justify-content-between mb-3">
                    <div class="d-flex align-items-center">
                        <div class="rounded-circle bg-secondary d-flex align-items-center justify-content-center me-3" 
                             style="width: 50px; height: 50px;">
                            <i class="fas fa-user text-white"></i>
                        </div>
                        <div class="flex-grow-1">
                            <div class="d-flex align-items-center justify-content-between">
                                <div>
                                    <h6 class="mb-0">@artistavisual</h6>
                                    <small class="text-muted">H√° 4 horas</small>
                                </div>
                                <button class="btn btn-sm btn-outline-primary monetizabtn ms-3" data-sound="navigation">
                                    <i class="fas fa-dollar-sign me-1"></i>Apoiar
                                </button>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-primary btn-sm follow-btn" data-sound="follow">Seguir</button>
                </div>
                
                <p class="mb-3">Nova arte digital inspirada em sons urbanos! üé® Feedback √© sempre bem-vindo!</p>
                
                <div class="mb-3">
                    <img src="images/capa.png" alt="Arte Digital" class="img-fluid rounded">
                </div>
                
                <!-- Star Rating -->
                <div class="star-rating" data-post="2">
                    <button class="btn btn-sm" data-rating="1" data-sound="star">
                        <i class="far fa-star"></i>
                    </button>
                    <button class="btn btn-sm" data-rating="2" data-sound="star">
                        <i class="far fa-star"></i>
                    </button>
                    <button class="btn btn-sm" data-rating="3" data-sound="star">
                        <i class="far fa-star"></i>
                    </button>
                    <button class="btn btn-sm" data-rating="4" data-sound="star">
                        <i class="far fa-star"></i>
                    </button>
                    <button class="btn btn-sm" data-rating="5" data-sound="star">
                        <i class="far fa-star"></i>
                    </button>
                    <button class="btn btn-sm ms-2" data-sound="comment">
                        <i class="far fa-comment-dots"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Post Card 3 - Text/Poetry -->
        <div class="card mb-4">
            <div class="card-body">
                <div class="d-flex align-items-center justify-content-between mb-3">
                    <div class="d-flex align-items-center">
                        <div class="rounded-circle bg-secondary d-flex align-items-center justify-content-center me-3" 
                             style="width: 50px; height: 50px;">
                            <i class="fas fa-user text-white"></i>
                        </div>
                        <div class="flex-grow-1">
                            <div class="d-flex align-items-center justify-content-between">
                                <div>
                                    <h6 class="mb-0">@poetaurbano</h6>
                                    <small class="text-muted">H√° 1 dia</small>
                                </div>
                                <button class="btn btn-sm btn-outline-primary monetizabtn ms-3" data-sound="navigation">
                                    <i class="fas fa-dollar-sign me-1"></i>Apoiar
                                </button>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-primary btn-sm follow-btn" data-sound="follow">Seguir</button>
                </div>
                
                <p class="mb-3"><em>"Entre as batidas do cora√ß√£o e o ritmo da cidade,<br>
                nascem versos que ecoam verdade.<br>
                Cada palavra, uma nota;<br>
                cada verso, uma melodia..."</em> ‚úçÔ∏è</p>
                
                <!-- Star Rating -->
                <div class="star-rating" data-post="3">
                    <button class="btn btn-sm" data-rating="1" data-sound="star">
                        <i class="far fa-star"></i>
                    </button>
                    <button class="btn btn-sm" data-rating="2" data-sound="star">
                        <i class="far fa-star"></i>
                    </button>
                    <button class="btn btn-sm" data-rating="3" data-sound="star">
                        <i class="far fa-star"></i>
                    </button>
                    <button class="btn btn-sm" data-rating="4" data-sound="star">
                        <i class="far fa-star"></i>
                    </button>
                    <button class="btn btn-sm" data-rating="5" data-sound="star">
                        <i class="far fa-star"></i>
                    </button>
                    <button class="btn btn-sm ms-2" data-sound="comment">
                        <i class="far fa-comment-dots"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Pop-up de Coment√°rios -->
    <div class="comments-overlay" id="comments-overlay">
        <div class="comments-popup">
            <div class="comments-header">
                <h3>Coment√°rios</h3>
                <button class="close-comments" id="close-comments">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="comments-content">
                <div class="comment-list">
                    <!-- Coment√°rios ser√£o carregados aqui -->
                    <div class="comment-item">
                        <div class="comment-author">
                            <i class="fa-solid fa-circle-user"></i>
                            <span>usu√°rio123</span>
                        </div>
                        <p>Gostei muito dessa m√∫sica! Parab√©ns pelo trabalho.</p>
                        <span class="comment-time">H√° 2 horas</span>
                    </div>
                </div>
                <div class="comment-form">
                    <textarea placeholder="Adicione um coment√°rio..." rows="3"></textarea>
                    <button class="btn-comment">Comentar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Pop-up de Monetiza√ß√£o -->
    <div class="monetization-overlay" id="monetization-overlay">
        <div class="monetization-popup">
            <div class="monetization-header">
                <h3>Apoiar username0255</h3>
                <button class="close-monetization" id="close-monetization">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="monetization-content">
                <div class="user-info">
                    <i class="fa-solid fa-circle-user fa-2x"></i>
                    <span>username0255</span>
                </div>
                
                <p class="monetization-description">Selecione um valor para apoiar este artista ou digite um valor personalizado:</p>
                
                <div class="amount-options">
                    <button class="amount-option" data-value="5">R$ 5</button>
                    <button class="amount-option" data-value="10">R$ 10</button>
                    <button class="amount-option" data-value="20">R$ 20</button>
                    <button class="amount-option" data-value="50">R$ 50</button>
                </div>
                
                <div class="custom-amount">
                    <label for="custom-amount-input">Ou informe outro valor:</label>
                    <div class="input-group">
                        <span class="currency-symbol">R$</span>
                        <input type="number" id="custom-amount-input" min="5" step="1" placeholder="5,00">
                    </div>
                </div>
                
                <div class="payment-method">
                    <h4>M√©todo de pagamento</h4>
                    <div class="payment-options">
                        <label class="payment-option">
                            <input type="radio" name="payment-method" value="pix" checked>
                            <span class="payment-label">PIX</span>
                        </label>
                        <label class="payment-option">
                            <input type="radio" name="payment-method" value="credit-card">
                            <span class="payment-label">Cart√£o de Cr√©dito</span>
                        </label>
                    </div>
                </div>
                
                <button class="btn-donate" id="btn-donate">Doar Agora</button>
            </div>
        </div>
    </div>

    <!--comentario-->
    <script>
    const commentButtons = document.querySelectorAll('.commentbtn');
    const commentsOverlay = document.getElementById('comments-overlay');
    const closeComments = document.getElementById('close-comments');

    // Abrir pop-up de coment√°rios
    commentButtons.forEach(btn => {
        btn.addEventListener('click', () => {
            commentsOverlay.classList.add('active');
            document.body.style.overflow = 'hidden'; // Impede scroll da p√°gina principal
        });
    });

    // Fechar pop-up de coment√°rios
    closeComments.addEventListener('click', () => {
        commentsOverlay.classList.remove('active');
        document.body.style.overflow = ''; // Restaura scroll
    });

    // Fechar ao clicar fora do pop-up
    commentsOverlay.addEventListener('click', (e) => {
        if (e.target === commentsOverlay) {
            commentsOverlay.classList.remove('active');
            document.body.style.overflow = '';
        }
    });

    // Enviar coment√°rio (exemplo b√°sico)
    const commentForm = document.querySelector('.comment-form');
    const commentTextarea = commentForm.querySelector('textarea');
    const commentList = document.querySelector('.comment-list');

    commentForm.addEventListener('submit', (e) => {
        e.preventDefault();
        
        const commentText = commentTextarea.value.trim();
        if (commentText) {
            const newComment = document.createElement('div');
            newComment.classList.add('comment-item');
            newComment.innerHTML = `
                <div class="comment-author">
                    <i class="fa-solid fa-circle-user"></i>
                    <span>Voc√™</span>
                </div>
                <p>${commentText}</p>
                <span class="comment-time">Agora</span>
            `;
            
            commentList.prepend(newComment);
            commentTextarea.value = '';
            
            // Scroll para o novo coment√°rio
            newComment.scrollIntoView({ behavior: 'smooth' });
        }
    });
    </script>

    <!--estrelas-->
    <script>
        const stars = document.querySelectorAll(".starbtn");

        stars.forEach((btn, index) => {
            btn.addEventListener("click", () => {
                // Primeiro, limpa todas as estrelas
                stars.forEach(star => {
                    let icon = star.querySelector("i");
                    icon.classList.remove("fa-solid");
                    icon.classList.add("fa-regular");
                    icon.style.color = "#000000"; // cor apagada
                });

                // Agora pinta at√© a estrela clicada
                for (let i = 0; i <= index; i++) {
                    let icon = stars[i].querySelector("i");
                    icon.classList.remove("fa-regular");
                    icon.classList.add("fa-solid");
                    icon.style.color = "#FFD43B"; // dourado
                }
            });
        });
    </script>
    
    <!--seguir-->
    <script>
        document.querySelectorAll('.js-seguir-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                // Alternar entre os estados
                if (this.textContent === 'Seguir') {
                    this.textContent = 'Seguindo';
                    this.classList.add('seguindo');
                } else {
                    this.textContent = 'Seguir';
                    this.classList.remove('seguindo');
                }
            });
        });
    </script>

    <!--monetizar-->
    <script>
    // Controle do pop-up de monetiza√ß√£o
    document.addEventListener('DOMContentLoaded', function() {
        const monetizaButtons = document.querySelectorAll('.monetizabtn');
        const monetizationOverlay = document.getElementById('monetization-overlay');
        const closeMonetization = document.getElementById('close-monetization');
        const amountOptions = document.querySelectorAll('.amount-option');
        const customAmountInput = document.getElementById('custom-amount-input');
        const btnDonate = document.getElementById('btn-donate');

        let selectedAmount = 0;

        // Abrir pop-up de monetiza√ß√£o
        monetizaButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                monetizationOverlay.classList.add('active');
                document.body.style.overflow = 'hidden';
                
                // Atualizar nome do usu√°rio no pop-up (se necess√°rio)
                const publication = btn.closest('.publicacao');
                if (publication) {
                    const userLink = publication.querySelector('a');
                    if (userLink) {
                        const userName = userLink.textContent.trim();
                        const userSpan = monetizationOverlay.querySelector('.user-info span');
                        if (userSpan && userName) {
                            userSpan.textContent = userName;
                            
                            // Atualizar tamb√©m o t√≠tulo
                            const title = monetizationOverlay.querySelector('.monetization-header h3');
                            if (title) {
                                title.textContent = `Apoiar ${userName}`;
                            }
                        }
                    }
                }
            });
        });

        // Fechar pop-up de monetiza√ß√£o
        closeMonetization.addEventListener('click', () => {
            monetizationOverlay.classList.remove('active');
            document.body.style.overflow = '';
            resetMonetizationForm();
        });

        // Fechar ao clicar fora do pop-up
        monetizationOverlay.addEventListener('click', (e) => {
            if (e.target === monetizationOverlay) {
                monetizationOverlay.classList.remove('active');
                document.body.style.overflow = '';
                resetMonetizationForm();
            }
        });

        // Fechar com tecla ESC
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && monetizationOverlay.classList.contains('active')) {
                monetizationOverlay.classList.remove('active');
                document.body.style.overflow = '';
                resetMonetizationForm();
            }
        });

        // Selecionar valor pr√©-definido
        amountOptions.forEach(option => {
            option.addEventListener('click', () => {
                // Remover sele√ß√£o anterior
                amountOptions.forEach(opt => opt.classList.remove('selected'));
                
                // Selecionar nova op√ß√£o
                option.classList.add('selected');
                
                // Definir valor selecionado
                selectedAmount = parseInt(option.dataset.value);
                customAmountInput.value = '';
                
                // Habilitar bot√£o de doar
                btnDonate.disabled = false;
            });
        });

        // Entrada de valor personalizado
        customAmountInput.addEventListener('input', () => {
            // Remover sele√ß√£o dos bot√µes de valor pr√©-definido
            amountOptions.forEach(opt => opt.classList.remove('selected'));
            
            // Obter valor do input
            const value = parseFloat(customAmountInput.value);
            
            if (value >= 5) {
                selectedAmount = value;
                btnDonate.disabled = false;
            } else {
                selectedAmount = 0;
                btnDonate.disabled = true;
            }
        });

        // Processar doa√ß√£o
        btnDonate.addEventListener('click', () => {
            if (selectedAmount >= 5) {
                // Aqui voc√™ implementaria a integra√ß√£o com o gateway de pagamento
                alert(`Obrigado pela doa√ß√£o de R$ ${selectedAmount.toFixed(2)}!`);
                
                // Fechar o pop-up ap√≥s a doa√ß√£o
                monetizationOverlay.classList.remove('active');
                document.body.style.overflow = '';
                resetMonetizationForm();
            }
        });

        // Fun√ß√£o para resetar o formul√°rio
        function resetMonetizationForm() {
            amountOptions.forEach(opt => opt.classList.remove('selected'));
            customAmountInput.value = '';
            selectedAmount = 0;
            btnDonate.disabled = true;
            
            // Resetar m√©todo de pagamento para PIX
            const pixOption = document.querySelector('input[value="pix"]');
            if (pixOption) {
                pixOption.checked = true;
            }
        }

        // Inicializar bot√£o como desabilitado
        btnDonate.disabled = true;
    });
    </script>

    <!-- Floating Action Button with Menu -->
    <div class="floating-actions">
        <div class="fab-container">
            <!-- Main FAB Button -->
            <button class="btn btn-primary rounded-circle fab-main" id="fabMain" data-sound="navigation">
                <i class="fas fa-plus" id="fabIcon"></i>
            </button>
            
            <!-- Sub-buttons (initially hidden) -->
            <div class="fab-menu" id="fabMenu">
                <a href="PublicarMusica.html" class="btn btn-primary rounded-circle fab-sub" data-sound="navigation" title="Publicar M√∫sica">
                    <i class="fas fa-music"></i>
                </a>
                <a href="PublicarImagem.html" class="btn btn-primary rounded-circle fab-sub" data-sound="navigation" title="Publicar Arte">
                    <i class="fas fa-paintbrush"></i>
                </a>
                <a href="PublicarLetra.html" class="btn btn-primary rounded-circle fab-sub" data-sound="navigation" title="Publicar Letra">
                    <i class="fas fa-feather"></i>
                </a>
            </div>
        </div>
    </div>

    <script>
        // Star rating functionality
        document.querySelectorAll('.star-rating').forEach(rating => {
            const stars = rating.querySelectorAll('button[data-rating]');
            
            stars.forEach((star, index) => {
                star.addEventListener('click', () => {
                    const postId = rating.dataset.post;
                    const starRating = parseInt(star.dataset.rating);
                    
                    // Update visual state
                    stars.forEach((s, i) => {
                        const icon = s.querySelector('i');
                        if (i < starRating) {
                            icon.classList.remove('far');
                            icon.classList.add('fas');
                            s.classList.add('active');
                        } else {
                            icon.classList.remove('fas');
                            icon.classList.add('far');
                            s.classList.remove('active');
                        }
                    });
                    
                    console.log(`Post ${postId} rated ${starRating} stars`);
                });
                
                // Hover effect
                star.addEventListener('mouseenter', () => {
                    const hoverRating = parseInt(star.dataset.rating);
                    stars.forEach((s, i) => {
                        const icon = s.querySelector('i');
                        if (i < hoverRating) {
                            icon.style.color = '#ffc107';
                        } else {
                            icon.style.color = '';
                        }
                    });
                });
            });
            
            // Reset hover effect when leaving rating area
            rating.addEventListener('mouseleave', () => {
                stars.forEach(s => {
                    const icon = s.querySelector('i');
                    icon.style.color = '';
                });
            });
        });

        // Follow button functionality
        document.querySelectorAll('.follow-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                if (btn.textContent.trim() === 'Seguir') {
                    btn.textContent = 'Seguindo';
                    btn.classList.add('following');
                } else {
                    btn.textContent = 'Seguir';
                    btn.classList.remove('following');
                }
            });
        });

        // Floating Action Button Menu
        const fabMain = document.getElementById('fabMain');
        const fabMenu = document.getElementById('fabMenu');
        const fabIcon = document.getElementById('fabIcon');
        let isMenuOpen = false;

        fabMain.addEventListener('click', () => {
            isMenuOpen = !isMenuOpen;
            
            if (isMenuOpen) {
                fabMenu.classList.add('open');
                fabMain.classList.add('open');
            } else {
                fabMenu.classList.remove('open');
                fabMain.classList.remove('open');
            }
        });

        // Close menu when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.fab-container') && isMenuOpen) {
                fabMenu.classList.remove('open');
                fabMain.classList.remove('open');
                isMenuOpen = false;
            }
        });

        // Dynamic Post Creation
        function createNewPost(postData) {
            const feedContainer = document.querySelector('.container');
            const newPostCard = document.createElement('div');
            newPostCard.className = 'card mb-4';
            
            // Get current post count for unique IDs
            const existingPosts = document.querySelectorAll('.star-rating').length;
            const newPostId = existingPosts + 1;
            
            newPostCard.innerHTML = `
                <div class="card-body">
                    <div class="d-flex align-items-center justify-content-between mb-3">
                        <div class="d-flex align-items-center">
                            <div class="rounded-circle bg-secondary d-flex align-items-center justify-content-center me-3" 
                                 style="width: 50px; height: 50px;">
                                <i class="fas fa-user text-white"></i>
                            </div>
                            <div class="flex-grow-1">
                                <div class="d-flex align-items-center justify-content-between">
                                    <div>
                                        <h6 class="mb-0">${postData.username}</h6>
                                        <small class="text-muted">Agora mesmo</small>
                                    </div>
                                    <button class="btn btn-sm btn-outline-primary monetizabtn ms-3" data-sound="navigation">
                                        <i class="fas fa-dollar-sign me-1"></i>Apoiar
                                    </button>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-primary btn-sm follow-btn" data-sound="follow">Seguir</button>
                    </div>
                    
                    <p class="mb-3">${postData.content}</p>
                    
                    ${postData.media ? postData.media : ''}
                    
                    <!-- Star Rating -->
                    <div class="star-rating" data-post="${newPostId}">
                        <button class="btn btn-sm" data-rating="1" data-sound="star">
                            <i class="far fa-star"></i>
                        </button>
                        <button class="btn btn-sm" data-rating="2" data-sound="star">
                            <i class="far fa-star"></i>
                        </button>
                        <button class="btn btn-sm" data-rating="3" data-sound="star">
                            <i class="far fa-star"></i>
                        </button>
                        <button class="btn btn-sm" data-rating="4" data-sound="star">
                            <i class="far fa-star"></i>
                        </button>
                        <button class="btn btn-sm" data-rating="5" data-sound="star">
                            <i class="far fa-star"></i>
                        </button>
                        <button class="btn btn-sm ms-2" data-sound="comment">
                            <i class="far fa-comment-dots"></i>
                        </button>
                    </div>
                </div>
            `;
            
            // Insert the new post at the top of the feed (after the first existing post)
            const firstPost = feedContainer.querySelector('.card');
            if (firstPost) {
                firstPost.parentNode.insertBefore(newPostCard, firstPost.nextSibling);
            } else {
                feedContainer.appendChild(newPostCard);
            }
            
            // Re-attach event listeners to new elements
            attachStarRatingEvents(newPostCard.querySelector('.star-rating'));
            attachFollowButtonEvents(newPostCard.querySelector('.follow-btn'));
            attachMonetizationEvents(newPostCard.querySelector('.monetizabtn'));
        }

        // Helper functions to attach events to dynamically created elements
        function attachStarRatingEvents(ratingElement) {
            if (!ratingElement) return;
            
            const stars = ratingElement.querySelectorAll('button[data-rating]');
            stars.forEach((star, index) => {
                star.addEventListener('click', () => {
                    const rating = parseInt(star.dataset.rating);
                    const postId = ratingElement.dataset.post;
                    
                    // Update visual feedback
                    stars.forEach((s, i) => {
                        const icon = s.querySelector('i');
                        if (i < rating) {
                            icon.classList.remove('far');
                            icon.classList.add('fas');
                            icon.style.color = 'var(--artbeat-roxo)';
                        } else {
                            icon.classList.remove('fas');
                            icon.classList.add('far');
                            icon.style.color = '';
                        }
                    });
                });
            });
        }

        function attachFollowButtonEvents(followButton) {
            if (!followButton) return;
            
            followButton.addEventListener('click', () => {
                if (followButton.textContent.trim() === 'Seguir') {
                    followButton.textContent = 'Seguindo';
                    followButton.classList.add('following');
                } else {
                    followButton.textContent = 'Seguir';
                    followButton.classList.remove('following');
                }
            });
        }

        function attachMonetizationEvents(monetizeButton) {
            if (!monetizeButton) return;
            
            monetizeButton.addEventListener('click', () => {
                document.getElementById('monetization-overlay').style.display = 'flex';
            });
        }

        // Example usage - you can call this function when a user creates a new post
        // createNewPost({
        //     username: '@newuser',
        //     icon: 'fas fa-music',
        //     content: 'Just posted a new track!',
        //     media: '<audio controls class="w-100"><source src="newtrack.mp3" type="audio/mpeg"></audio>'
        // });

    </script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <!-- Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>

    <!-- ArtBeat Sound System -->
    <script src="js/artbeat-sounds.js"></script>

</body>
</html>
